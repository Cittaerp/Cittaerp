function compute_allowance(){var n=$("#loader1").data("request-daily");n=$.trim(n);var t=$("#start_date1").val(),i=$("#duration1").val(),r=$("#vac_year").val(),u=$("#snumber").val();t=$.trim(t);i=$.trim(i);r=$.trim(r);n=n+"03"+t+"[]"+i+"[]"+r+"[]"+u;$.ajax({type:"Post",url:n,error:function(t,i,r){alert("Error: "+t.status+" - "+r+" - "+n)},success:function(n){$.each(n,function(n,t){t.Value!=""?($("#para_type").show(),$("#vac_text").html(t.Value)):$("#para_type").hide()})}})}function check_date(n){var u=$("#loader1").data("request-daily"),f;u=$.trim(u);var i=$("#start_date1").val(),t=$("#duration1").val(),r=$("#end_date1").val(),e=$("#vac_type").val();i=$.trim(i);t=$.trim(t);r=$.trim(r);f=$.isNumeric(t);f==!0&&(u=u+"02"+i+"[]"+t+"[]"+r+"[]"+n,$.ajax({type:"Post",url:u,async:!1,error:function(n,t,i){alert("Error: "+n.status+" - "+i+" - "+u)},success:function(u){var h,o,s,f;$.each(u,function(u,f){i!=""&&t=="0"&&r!=""?$("#duration1").val(f.Text):i!=""&&t!="0"&&r==""?$("#end_date1").val(f.Text):i==""&&t!="0"&&r!=""?$("#start_date1").val(f.Text):i!=""&&t!="0"&&r!=""&&n=="D"?$("#end_date1").val(f.Text):i!=""&&t!="0"&&r!=""&&n=="E"?$("#duration1").val(f.Text):i!=""&&t!="0"&&r!=""&&n=="S"&&$("#end_date1").val(f.Text)});h=$("#vactype").val();h=="R"?(o=$("#recalldays").html(),f=o-t,f<0&&alert("You can't recall more than vacation days initially approved - "+o+" days")):(s=$("#outst").html(),f=s-t,f<0&&e!="MATER"&&alert("The days requested exceed your balance - "+s+" days"))}}))}function check_roast_date(n,t){var f=$("#loader1").data("request-daily"),e;f=$.trim(f);var r=$("#start_roast"+n).val(),i=$("#dura_roast"+n).val(),u=$("#end_roast"+n).val();r=$.trim(r);i=$.trim(i);u=$.trim(u);e=$.isNumeric(i);e==!0&&(f=f+"02"+r+"[]"+i+"[]"+u+"[]"+t,$.ajax({type:"Post",url:f,async:!1,error:function(n,t,i){alert("Error: "+n.status+" - "+i+" - "+f)},success:function(f){$.each(f,function(f,e){r==""&&i!="0"&&u!=""?$("#start_roast"+n).val(e.Text):r!=""&&i=="0"&&u!=""?$("#dura_roast"+n).val(e.Text):r!=""&&i!="0"&&u==""?$("#end_roast"+n).val(e.Text):r!=""&&i!="0"&&u!=""&&t=="D"?$("#end_roast"+n).val(e.Text):r!=""&&i!="0"&&u!=""&&t=="E"?$("#dura_roast"+n).val(e.Text):r!=""&&i!="0"&&u!=""&&t=="S"&&$("#end_roast"+n).val(e.Text);amt_total()})}}))}function get_former_transaction(n){var t=$("#loader2").data("request-daily"),i;t=$.trim(t);i=$("#snumber").val();t=t+n+"[]"+i;$.ajax({type:"Post",url:t,error:function(n,i,r){alert("Error: "+n.status+" - "+r+" - "+t)},success:function(n){var t="";$.each(n,function(n,i){t+=i.Text});$("#vaclist").html(t);table_creatennn()}})}function amt_total(){var n=0,t=0,i;$(".adamountb").each(function(){t=parseFloat($(this).val().replace(/,/g,""));n+=t});i=n.toFixed(2).replace(/./g,function(n,t,i){return t&&n!=="."&&(i.length-t)%3==0?","+n:n});$("#rbal").val(i)}function amt_balance(){var n=0,t=0,i,r;$(".adamount").each(function(){t=parseFloat($(this).val().replace(/,/g,""));n+=t});i=parseFloat($("#totamt").val().replace(/,/g,""));r=(i-n).toFixed(2).replace(/./g,function(n,t,i){return t&&n!=="."&&(i.length-t)%3==0?","+n:n});$("#rtotal").html(r)}$(function(){$("#start_date1").change(function(){$("body").addClass("waiting");check_date("S");$("body").removeClass("waiting")});$("#duration1").change(function(){$("body").addClass("waiting");check_date("D");$("body").removeClass("waiting")});$("#end_date1").change(function(){$("body").addClass("waiting");check_date("E");$("body").removeClass("waiting")});$("#vac_year").click(function(){$("body").addClass("waiting");var n=$("input[name=string9]:checked").val();n=="Y"&&compute_allowance();$("body").removeClass("waiting")});$("#payal_yesno").click(function(){$("#payal_yesno").prop("checked")?($("body").addClass("waiting"),compute_allowance(),$("body").removeClass("waiting")):$("#vac_text").html("Allowance Amount : 0.00")});$("#pay_no").click(function(){$("#vac_text").html("Allowance Amount : 0.00")});$("#dep_type").change(function(){$("#depname").hide();$(".newdep").hide();var n=$("#dep_type").val();(n=="D"||n=="A")&&$("#depname").show();(n=="A"||n=="N")&&$(".newdep").show()});var n;$("#staff_number").change(function(){lgshow();var n=$(this).closest("form");$("#id_xhrt").val("id_line0");n.trigger("submit")});$("#snumber").change(function(){lgshow();var n=$(this).closest("form");$("#id_xhrt").val("id_line0");n.trigger("submit")});$("#vac_type").change(function(){lgshow();var n=$(this).closest("form");$("#id_xhrt").val("id_line0");n.trigger("submit")});$(".cls_line").change(function(){lgshow();n="L";var t=$(this).attr("id"),i=$(this).closest("form");$("#id_xhrt").val(t);i.trigger("submit")});$(".adamount").change(function(){amt_balance()});$(".adamount1").change(function(){amt_balance()});$(".adamountb").change(function(){amt_total()});$(".roast_start").change(function(){$("body").addClass("waiting");var n=$(this).attr("id"),t=n.substr(n.length-1,1);check_roast_date(t,"S");$("body").removeClass("waiting")});$(".roast_dura").change(function(){$("body").addClass("waiting");var n=$(this).attr("id"),t=n.substr(n.length-1,1);check_roast_date(t,"D");$("body").removeClass("waiting")});$(".roast_end").change(function(){$("body").addClass("waiting");var n=$(this).attr("id"),t=n.substr(n.length-1,1);check_roast_date(t,"E");$("body").removeClass("waiting")});$("#roast_year").change(function(){var t=$("#roast_year").val(),i=$("#snumber").val(),n=$("#loader1").data("request-daily");n=$.trim(n);t=$.trim(t);n=n+"04"+t+"[]"+i;$.ajax({type:"Post",url:n,async:!1,error:function(t,i,r){alert("Error: "+t.status+" - "+r+" - "+n)},success:function(n){var t="";$.each(n,function(n,i){t=i.Text});$("#totamt").val(t)}})})});